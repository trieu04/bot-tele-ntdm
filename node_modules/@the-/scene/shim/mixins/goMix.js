/**
 * @function goMix
 * @memberOf module:@the-/scene.mixins
 * @param {function} BaseClass
 * @returns {function} MixedClass
 */
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _require = require('bwindow'),
    get = _require.get;

var _require2 = require('@the-/url'),
    formatUrl = _require2.formatUrl;
/** @lends module:@the-/scene.mixins.goMix */


function goMix(BaseClass) {
  /**
   * @inner
   * @memberOf module:@the-/scene.mixins.goMix
   */
  var GoMixed =
  /*#__PURE__*/
  function (_BaseClass) {
    (0, _inherits2["default"])(GoMixed, _BaseClass);

    function GoMixed() {
      (0, _classCallCheck2["default"])(this, GoMixed);
      return (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf2["default"])(GoMixed).apply(this, arguments));
    }

    (0, _createClass2["default"])(GoMixed, [{
      key: "goTo",
      value: function goTo(href) {
        var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        href = formatUrl(href, params);
        var history = this.history;

        if (history) {
          history.push(href);
          return;
        }

        var location = get('location');

        if (location) {
          location.href = href;
          return;
        }

        console.warn("Failed to go to ".concat(href));
      }
    }, {
      key: "goToTop",
      value: function goToTop() {
        this.goTo('/');
      }
    }]);
    return GoMixed;
  }(BaseClass);

  return GoMixed;
}

module.exports = goMix;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdvTWl4LmpzIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJnZXQiLCJmb3JtYXRVcmwiLCJnb01peCIsIkJhc2VDbGFzcyIsIkdvTWl4ZWQiLCJocmVmIiwicGFyYW1zIiwiaGlzdG9yeSIsInB1c2giLCJsb2NhdGlvbiIsImNvbnNvbGUiLCJ3YXJuIiwiZ29UbyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7QUFNQTs7Ozs7Ozs7Ozs7Ozs7ZUFFZ0JBLE9BQU8sQ0FBQyxTQUFELEM7SUFBZkMsRyxZQUFBQSxHOztnQkFDY0QsT0FBTyxDQUFDLFdBQUQsQztJQUFyQkUsUyxhQUFBQSxTO0FBRVI7OztBQUNBLFNBQVNDLEtBQVQsQ0FBZUMsU0FBZixFQUEwQjtBQUN4Qjs7OztBQUR3QixNQUtsQkMsT0FMa0I7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBLDJCQU1qQkMsSUFOaUIsRUFNRTtBQUFBLFlBQWJDLE1BQWEsdUVBQUosRUFBSTtBQUN0QkQsUUFBQUEsSUFBSSxHQUFHSixTQUFTLENBQUNJLElBQUQsRUFBT0MsTUFBUCxDQUFoQjtBQURzQixZQUVkQyxPQUZjLEdBRUYsSUFGRSxDQUVkQSxPQUZjOztBQUd0QixZQUFJQSxPQUFKLEVBQWE7QUFDWEEsVUFBQUEsT0FBTyxDQUFDQyxJQUFSLENBQWFILElBQWI7QUFDQTtBQUNEOztBQUNELFlBQU1JLFFBQVEsR0FBR1QsR0FBRyxDQUFDLFVBQUQsQ0FBcEI7O0FBQ0EsWUFBSVMsUUFBSixFQUFjO0FBQ1pBLFVBQUFBLFFBQVEsQ0FBQ0osSUFBVCxHQUFnQkEsSUFBaEI7QUFDQTtBQUNEOztBQUNESyxRQUFBQSxPQUFPLENBQUNDLElBQVIsMkJBQWdDTixJQUFoQztBQUNEO0FBbkJxQjtBQUFBO0FBQUEsZ0NBcUJaO0FBQ1IsYUFBS08sSUFBTCxDQUFVLEdBQVY7QUFDRDtBQXZCcUI7QUFBQTtBQUFBLElBS0ZULFNBTEU7O0FBMEJ4QixTQUFPQyxPQUFQO0FBQ0Q7O0FBRURTLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQlosS0FBakIiLCJzb3VyY2VSb290IjoiLi4vbGliIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZnVuY3Rpb24gZ29NaXhcbiAqIEBtZW1iZXJPZiBtb2R1bGU6QHRoZS0vc2NlbmUubWl4aW5zXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBCYXNlQ2xhc3NcbiAqIEByZXR1cm5zIHtmdW5jdGlvbn0gTWl4ZWRDbGFzc1xuICovXG4ndXNlIHN0cmljdCdcblxuY29uc3QgeyBnZXQgfSA9IHJlcXVpcmUoJ2J3aW5kb3cnKVxuY29uc3QgeyBmb3JtYXRVcmwgfSA9IHJlcXVpcmUoJ0B0aGUtL3VybCcpXG5cbi8qKiBAbGVuZHMgbW9kdWxlOkB0aGUtL3NjZW5lLm1peGlucy5nb01peCAqL1xuZnVuY3Rpb24gZ29NaXgoQmFzZUNsYXNzKSB7XG4gIC8qKlxuICAgKiBAaW5uZXJcbiAgICogQG1lbWJlck9mIG1vZHVsZTpAdGhlLS9zY2VuZS5taXhpbnMuZ29NaXhcbiAgICovXG4gIGNsYXNzIEdvTWl4ZWQgZXh0ZW5kcyBCYXNlQ2xhc3Mge1xuICAgIGdvVG8oaHJlZiwgcGFyYW1zID0ge30pIHtcbiAgICAgIGhyZWYgPSBmb3JtYXRVcmwoaHJlZiwgcGFyYW1zKVxuICAgICAgY29uc3QgeyBoaXN0b3J5IH0gPSB0aGlzXG4gICAgICBpZiAoaGlzdG9yeSkge1xuICAgICAgICBoaXN0b3J5LnB1c2goaHJlZilcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjb25zdCBsb2NhdGlvbiA9IGdldCgnbG9jYXRpb24nKVxuICAgICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICAgIGxvY2F0aW9uLmhyZWYgPSBocmVmXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gZ28gdG8gJHtocmVmfWApXG4gICAgfVxuXG4gICAgZ29Ub1RvcCgpIHtcbiAgICAgIHRoaXMuZ29UbygnLycpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIEdvTWl4ZWRcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnb01peFxuIl19