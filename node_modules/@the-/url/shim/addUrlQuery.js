'use strict';
/**
 * Add query to url string
 * @memberof module:@the-/url
 * @function addQuery
 * @param {string} urlString - URL to add
 * @param {Object} query - Query to add
 * @returns {string} Added url string
 */

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var _require = require('bwindow'),
    get = _require.get;

var qs = require('qs');
/** @lends addUrlQuery */


function addUrlQuery(urlString) {
  var query = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var isRelative = urlString.match(/^\//);
  var url = isRelative ? new URL(urlString, get('location.origin') || 'relative:///') : new URL(urlString);
  var queryString = url.search.replace(/^\?/, '');
  url.search = qs.stringify(_objectSpread({}, qs.parse(queryString), {}, query));
  return isRelative ? [url.pathname, url.search].join('') : url.href;
}

module.exports = addUrlQuery;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZFVybFF1ZXJ5LmpzIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJnZXQiLCJxcyIsImFkZFVybFF1ZXJ5IiwidXJsU3RyaW5nIiwicXVlcnkiLCJpc1JlbGF0aXZlIiwibWF0Y2giLCJ1cmwiLCJVUkwiLCJxdWVyeVN0cmluZyIsInNlYXJjaCIsInJlcGxhY2UiLCJzdHJpbmdpZnkiLCJwYXJzZSIsInBhdGhuYW1lIiwiam9pbiIsImhyZWYiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUVBOzs7Ozs7Ozs7Ozs7Ozs7OztlQVFnQkEsT0FBTyxDQUFDLFNBQUQsQztJQUFmQyxHLFlBQUFBLEc7O0FBQ1IsSUFBTUMsRUFBRSxHQUFHRixPQUFPLENBQUMsSUFBRCxDQUFsQjtBQUVBOzs7QUFDQSxTQUFTRyxXQUFULENBQXFCQyxTQUFyQixFQUE0QztBQUFBLE1BQVpDLEtBQVksdUVBQUosRUFBSTtBQUMxQyxNQUFNQyxVQUFVLEdBQUdGLFNBQVMsQ0FBQ0csS0FBVixDQUFnQixLQUFoQixDQUFuQjtBQUNBLE1BQU1DLEdBQUcsR0FBR0YsVUFBVSxHQUNsQixJQUFJRyxHQUFKLENBQVFMLFNBQVIsRUFBbUJILEdBQUcsQ0FBQyxpQkFBRCxDQUFILElBQTBCLGNBQTdDLENBRGtCLEdBRWxCLElBQUlRLEdBQUosQ0FBUUwsU0FBUixDQUZKO0FBR0EsTUFBTU0sV0FBVyxHQUFHRixHQUFHLENBQUNHLE1BQUosQ0FBV0MsT0FBWCxDQUFtQixLQUFuQixFQUEwQixFQUExQixDQUFwQjtBQUNBSixFQUFBQSxHQUFHLENBQUNHLE1BQUosR0FBYVQsRUFBRSxDQUFDVyxTQUFILG1CQUFrQlgsRUFBRSxDQUFDWSxLQUFILENBQVNKLFdBQVQsQ0FBbEIsTUFBNENMLEtBQTVDLEVBQWI7QUFDQSxTQUFPQyxVQUFVLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDTyxRQUFMLEVBQWVQLEdBQUcsQ0FBQ0csTUFBbkIsRUFBMkJLLElBQTNCLENBQWdDLEVBQWhDLENBQUgsR0FBeUNSLEdBQUcsQ0FBQ1MsSUFBOUQ7QUFDRDs7QUFFREMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCaEIsV0FBakIiLCJzb3VyY2VSb290IjoiLi4vbGliIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbi8qKlxuICogQWRkIHF1ZXJ5IHRvIHVybCBzdHJpbmdcbiAqIEBtZW1iZXJvZiBtb2R1bGU6QHRoZS0vdXJsXG4gKiBAZnVuY3Rpb24gYWRkUXVlcnlcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxTdHJpbmcgLSBVUkwgdG8gYWRkXG4gKiBAcGFyYW0ge09iamVjdH0gcXVlcnkgLSBRdWVyeSB0byBhZGRcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEFkZGVkIHVybCBzdHJpbmdcbiAqL1xuY29uc3QgeyBnZXQgfSA9IHJlcXVpcmUoJ2J3aW5kb3cnKVxuY29uc3QgcXMgPSByZXF1aXJlKCdxcycpXG5cbi8qKiBAbGVuZHMgYWRkVXJsUXVlcnkgKi9cbmZ1bmN0aW9uIGFkZFVybFF1ZXJ5KHVybFN0cmluZywgcXVlcnkgPSB7fSkge1xuICBjb25zdCBpc1JlbGF0aXZlID0gdXJsU3RyaW5nLm1hdGNoKC9eXFwvLylcbiAgY29uc3QgdXJsID0gaXNSZWxhdGl2ZVxuICAgID8gbmV3IFVSTCh1cmxTdHJpbmcsIGdldCgnbG9jYXRpb24ub3JpZ2luJykgfHwgJ3JlbGF0aXZlOi8vLycpXG4gICAgOiBuZXcgVVJMKHVybFN0cmluZylcbiAgY29uc3QgcXVlcnlTdHJpbmcgPSB1cmwuc2VhcmNoLnJlcGxhY2UoL15cXD8vLCAnJylcbiAgdXJsLnNlYXJjaCA9IHFzLnN0cmluZ2lmeSh7IC4uLnFzLnBhcnNlKHF1ZXJ5U3RyaW5nKSwgLi4ucXVlcnkgfSlcbiAgcmV0dXJuIGlzUmVsYXRpdmUgPyBbdXJsLnBhdGhuYW1lLCB1cmwuc2VhcmNoXS5qb2luKCcnKSA6IHVybC5ocmVmXG59XG5cbm1vZHVsZS5leHBvcnRzID0gYWRkVXJsUXVlcnlcbiJdfQ==